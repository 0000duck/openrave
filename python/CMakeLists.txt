# add ikfast program
set(IKFAST_EXECUTABLE ${CMAKE_CURRENT_SOURCE_DIR}/ikfast.py)
if( UNIX OR NOT PYTHON_EXECUTABLE )
  execute_process(
    COMMAND ${IKFAST_EXECUTABLE} --help
    RESULT_VARIABLE _ikfast_success
    ERROR_VARIABLE _ikfast_error
    OUTPUT_VARIABLE _ikfast_output)
else()
  set(_ikfast_success 0)
endif()

if( _ikfast_success MATCHES 0 OR _ikfast_success MATCHES 1 )
  set(IKFAST_FOUND 1)
  message(STATUS "ikfast found (${IKFAST_EXECUTABLE})")
else()
  set(IKFAST_FOUND 0)
  message(STATUS "failed to execute ${IKFAST_EXECUTABLE}, return: ${_ikfast_success}")
endif()

add_subdirectory(bindings)

# install all python files
install(FILES __init__.py ikfast.py metaclass.py openravepy_ext.py DESTINATION ${OPENRAVEPY_INSTALL_DIR})
install(FILES openrave.py openrave-hash.py DESTINATION bin PERMISSIONS OWNER_EXECUTE OWNER_WRITE OWNER_READ GROUP_EXECUTE GROUP_READ WORLD_EXECUTE WORLD_READ)
install(DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}/examples" DESTINATION ${OPENRAVEPY_INSTALL_DIR}  FILE_PERMISSIONS OWNER_EXECUTE OWNER_WRITE OWNER_READ GROUP_EXECUTE GROUP_READ WORLD_EXECUTE WORLD_READ PATTERN ".svn" EXCLUDE)
install(DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}/interfaces" DESTINATION ${OPENRAVEPY_INSTALL_DIR}  FILE_PERMISSIONS OWNER_WRITE OWNER_READ GROUP_READ WORLD_READ PATTERN ".svn" EXCLUDE)
install(DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}/databases" DESTINATION ${OPENRAVEPY_INSTALL_DIR}  FILE_PERMISSIONS OWNER_EXECUTE OWNER_WRITE OWNER_READ GROUP_EXECUTE GROUP_READ WORLD_EXECUTE WORLD_READ PATTERN ".svn" EXCLUDE)
