add_subdirectory(bindings)

set(OPENRAVEPY_EGG "${CMAKE_CURRENT_BINARY_DIR}/openravepy-${OPENRAVE_VERSION_MAJOR}.${OPENRAVE_VERSION_MINOR}.egg-info")
configure_file("${CMAKE_CURRENT_SOURCE_DIR}/openravepy.egg-info.in" "${OPENRAVEPY_EGG}" IMMEDIATE @ONLY)
install(FILES "${OPENRAVEPY_EGG}" DESTINATION "${OPENRAVE_PYTHON_INSTALL_DIR}" COMPONENT openrave-python)

# install all python files
install(FILES __init__.py ikfast.py ikfast_generator_cpp.py metaclass.py openravepy_ext.py DESTINATION ${OPENRAVEPY_INSTALL_DIR} COMPONENT openrave-python)
install(FILES openrave.py openrave-hash.py DESTINATION bin PERMISSIONS OWNER_EXECUTE OWNER_WRITE OWNER_READ GROUP_EXECUTE GROUP_READ WORLD_EXECUTE WORLD_READ COMPONENT openrave-python)
install(DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}/examples" DESTINATION ${OPENRAVEPY_INSTALL_DIR} FILE_PERMISSIONS OWNER_EXECUTE OWNER_WRITE OWNER_READ GROUP_EXECUTE GROUP_READ WORLD_EXECUTE WORLD_READ COMPONENT openrave-python PATTERN ".svn" EXCLUDE PATTERN ".pyc" EXCLUDE)
install(DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}/interfaces" DESTINATION ${OPENRAVEPY_INSTALL_DIR}  FILE_PERMISSIONS OWNER_WRITE OWNER_READ GROUP_READ WORLD_READ COMPONENT openrave-python PATTERN ".svn" EXCLUDE PATTERN ".pyc" EXCLUDE)
install(DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}/databases" DESTINATION ${OPENRAVEPY_INSTALL_DIR}  FILE_PERMISSIONS OWNER_EXECUTE OWNER_WRITE OWNER_READ GROUP_EXECUTE GROUP_READ WORLD_EXECUTE WORLD_READ COMPONENT openrave-python PATTERN ".svn" EXCLUDE PATTERN ".pyc" EXCLUDE)

set(CPACK_COMPONENT_OPENRAVE-PYTHON_DESCRIPTION "OpenRAVE Python bindings" PARENT_SCOPE)
set(CPACK_COMPONENT_OPENRAVE-PYTHON_DEPENDS "libboost${Boost_MAJOR_VERSION}.${Boost_MINOR_VERSION}.${Boost_SUBMINOR_VERSION}-python python-numpy python${PYTHON_MAJORMINOR_VERSION}" PARENT_SCOPE)
if( NOT OPENRAVE_USE_LOCAL_SYMPY )
  set(CPACK_COMPONENT_OPENRAVE-PYTHON_DEPENDS ${CPACK_COMPONENT_OPENRAVE-PYTHON_DEPENDS} python-sympy PARENT_SCOPE)
endif()
